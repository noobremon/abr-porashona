<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Study App</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <link rel="stylesheet" href="teacher.css">
    <style>
        .dashboard-grid .grid-card {
            aspect-ratio: 1 / 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            text-decoration: none;
        }
        .grid-card .card-title {
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <div id="teacher-bg-animation"></div>

    <div class="teacher-dashboard-container">
        <aside class="sidebar">
            <div class="sidebar-top">
                <div class="sidebar-header">
                    <div class="logo">Teacher Panel</div>
                </div>
                <nav class="sidebar-nav">
                    <a href="teacher.html" class="nav-link active-link">
                        <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
                    </a>
                    <a href="teacher_attendance.html" class="nav-link">
                        <i class="fas fa-user-check"></i><span>Attendance</span>
                    </a>
                    <a href="teacher_announcement.html" class="nav-link">
                        <i class="fas fa-bullhorn"></i><span>Announcements</span>
                    </a>
                    <a href="publish.html" class="nav-link">
                        <i class="fas fa-poll"></i><span>Results</span>
                    </a>
                    <a href="track.html" class="nav-link">
                        <i class="fas fa-chart-bar"></i><span>Student Tracking</span>
                    </a>
                    <a href="#" class="nav-link">
                        <i class="fas fa-comments"></i><span>Messaging</span>
                    </a>
                </nav>
            </div>
            <div class="sidebar-footer">
                <a href="index.html" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i><span>Logout</span>
                </a>
            </div>
        </aside>

        <main class="main-content">
            <header class="main-header">
                <div class="menu-toggle"><i class="fas fa-bars"></i></div>
                <div class="header-details">
                    <div class="teacher-welcome">
                        <i class="fas fa-chalkboard-teacher"></i>
                        <span>Welcome, <strong id="userName">Teacher</strong></span>
                    </div>
                    <div class="institution-info">
                        <i class="fas fa-school"></i>
                        <span>Maple High | Grade 10 Physics</span>
                    </div>
                </div>
            </header>

            <div class="content-views">

                <section id="view-dashboard" class="content-view active-view">
                    <h2 class="view-title">Dashboard Overview</h2>
                    <div class="dashboard-grid">
                        <a href="teacher_attendance.html" class="grid-card card-attendance">
                            <div class="card-icon"><i class="fas fa-calendar-plus"></i></div>
                            <h3 class="card-title">Mark Attendance</h3>
                            <p class="card-info">Update today's attendance records</p>
                        </a>
                        <a href="teacher_announcement.html" class="grid-card card-announcements">
                            <div class="card-icon"><i class="fas fa-plus-circle"></i></div>
                            <h3 class="card-title">New Announcement</h3>
                            <p class="card-info">Post updates for students & parents</p>
                        </a>
                        <a href="publish.html" class="grid-card card-results">
                            <div class="card-icon"><i class="fas fa-upload"></i></div>
                            <h3 class="card-title">Publish Results</h3>
                            <p class="card-info">Upload new exam scores</p>
                        </a>
                        <a href="track.html" class="grid-card card-tracking">
                            <div class="card-icon"><i class="fas fa-search-plus"></i></div>
                            <h3 class="card-title">Track Students</h3>
                            <p class="card-info">View academic analytics</p>
                        </a>
                    </div>
                </section>

                <section id="view-attendance" class="content-view">
                    <h2 class="view-title">Attendance Management</h2>
                    <div class="management-panel">
                        <div class="controls">
                            <select><option>Select Class - Grade 10</option></select>
                            <input type="date" value="2025-09-17">
                        </div>
                        <div class="student-list">
                            <div class="student-row header">
                                <span>Roll No.</span><span>Student Name</span><span>Status</span>
                            </div>
                            <div class="student-row">
                                <span>101</span><span>Aryan Sharma</span><div class="attendance-toggle present">P</div>
                            </div>
                            <div class="student-row">
                                <span>102</span><span>Priya Singh</span><div class="attendance-toggle present">P</div>
                            </div>
                             <div class="student-row">
                                <span>103</span><span>Rohan Verma</span><div class="attendance-toggle absent">A</div>
                            </div>
                        </div>
                        <button class="btn-action">Save Attendance</button>
                    </div>
                </section>

                <section id="view-announcements" class="content-view">
                    <h2 class="view-title">Post an Announcement</h2>
                     <div class="management-panel">
                        <form class="announcement-form">
                            <input type="text" placeholder="Announcement Title">
                            <textarea rows="5" placeholder="Type your message here..."></textarea>
                             <select>
                                <option>Visible to: Students & Parents (Grade 10)</option>
                                <option>Visible to: All Parents</option>
                            </select>
                            <button type="submit" class="btn-action">Post Now</button>
                        </form>
                    </div>
                </section>
                
                <section id="view-results" class="content-view">
                     <h2 class="view-title">Result Publishing</h2>
                     <div class="management-panel">
                         <h3>Upload New Results</h3>
                         <form class="results-form">
                             <input type="text" placeholder="Exam Name (e.g., Mid-Term Physics)">
                             <select><option>Select Class - Grade 10</option></select>
                             <div class="file-upload">
                                 <label for="result-file">Upload Grades (CSV):</label>
                                 <input type="file" id="result-file">
                             </div>
                             <button class="btn-action">Publish Results</button>
                         </form>
                     </div>
                </section>
                
                <section id="view-tracking" class="content-view">
                    <h2 class="view-title">Student Tracking & Analytics</h2>
                    <div class="management-panel">
                        <h3>Class Performance (Physics - Mid-Term)</h3>
                        <div class="chart-container">
                             <div class="chart-bar" style="height: 85%;"><span class="label">Grade A</span></div>
                             <div class="chart-bar" style="height: 60%;"><span class="label">Grade B</span></div>
                             <div class="chart-bar" style="height: 30%;"><span class="label">Grade C</span></div>
                             <div class="chart-bar" style="height: 15%;"><span class="label">Failed</span></div>
                        </div>
                    </div>
                </section>
                
                <section id="view-messaging" class="content-view">
                    <h2 class="view-title">Messaging</h2>
                    <div class="messaging-panel">
                        <div class="conversations-list">
                             <div class="convo-item active">Mr. Sharma (Parent)</div>
                             <div class="convo-item">Priya Singh (Student)</div>
                        </div>
                        <div class="chat-window">
                             <div class="message received">Hi, wanted to ask about Aryan's progress.</div>
                             <div class="message sent">He's doing great! Showing a lot of improvement.</div>
                             <input type="text" placeholder="Type a message...">
                        </div>
                    </div>
                </section>

            </div>
        </main>
    </div>

    <script>
    // Check if user is logged in
    document.addEventListener('DOMContentLoaded', function() {
        const user = JSON.parse(localStorage.getItem('currentUser') || 'null');
        
        if (!user || !user.loggedIn || user.role !== 'teacher') {
            window.location.href = 'index.html';
            return;
        }
        
        // Display user's name
        if (user.name) {
            document.getElementById('userName').textContent = user.name;
        }
        
        // Handle logout
        const logoutBtn = document.querySelector('.btn-logout');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', function(e) {
                e.preventDefault();
                // Clear user session
                if (user) {
                    user.loggedIn = false;
                    localStorage.setItem('currentUser', JSON.stringify(user));
                }
                // Redirect to login
                window.location.href = 'index.html';
            });
        }
    });
</script>
</body>
</html>